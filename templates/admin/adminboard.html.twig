{% extends 'base.html.twig' %}

{% block title %}AdminBoard{% endblock %}

{% block body %}
  <style>
    h1 {
      text-align: center;
      margin: 2rem;
    }
    img {
      width: 10rem;
      /* height: 10rem; */
      margin: 2rem;
    }
    .menuGauche {
      display: flex;
      flex-direction: column;
    }
    .blocBoutons {
      display: flex;
      flex-direction: column;
      border: 1px solid grey;
      border-radius: 1rem;
    }
    .blocBoutons .btn {
      margin: 1rem 2rem;
    }
    .trancheSelection {
      display: flex;
    }
    .trancheSelection form {
      margin-right: 1rem;
    }
    h3 {
      margin-right: 1rem;
    }

    .titreUtilisateur {
      display: flex;
      margin: 1rem;
    }
    .blocTitreEquipement {
      display: flex;

    }
    .titreListePoints {
      display: flex;
    }
    .imageEquipement {
      width: 40rem;
    }
    .imageEquipement img {
      width: 40rem;
      margin-left: 6rem;
      margin-right: auto;
    }
    .blocTableauUtilisateur {
      border: 1px solid grey;
      border-radius: 1rem;
    }
    .blocTableauUtilisateur table {
      margin: 1rem;
      width: 95%;
    }
    .blocEquipement {
      border: 1px solid grey;
      border-radius: 1rem;
    }
    .blocEquipement h3 {
      margin-left: 1rem;
    }
    .blocTitreEquipement {
      margin: 1rem;
    }
    .tableauEquipements table {
      margin: 1rem;
      width: 95%;
    }
    .blocDetailEquipement {
      margin: 1rem;
      border: 1px solid grey;
      border-radius: 1rem;
    }
    .blocDetailEquipement table {
      margin: 1rem;
      width: 95%;
    }
  </style>
  <div class="example-wrapper">
    <h1>Tableau de bord administrateur</h1>
  </div>
  <main class="row">

    <div class="menuGauche col-3">
      <img src="{{ asset('images/HVAC_logo.jpg') }}" alt="image logo HVAC"/>
      <div class="blocBoutons">
        <a href="" class="btn btn-outline-primary">Accueil</a>
        <a href="" class="btn btn-outline-primary">Utilisateurs</a>
        <a href="" class="btn btn-outline-primary">Sites</a>
        <a href="" class="btn btn-outline-primary">Equimements</a>
        <a href="" class="btn btn-outline-primary">Points de mesures</a>
        <a href="" class="btn btn-outline-primary">Capteurs</a>
      </div>
    </div>

    <div class="pageDroite col-9">
      <div class="trancheSelection">
        <form action="" method="POST">
          <select class="form-select" id='select_site' name='postSiteId' onchange="this.form.submit()">
            <option name='choisir' value='null'>Choisir site</option>
            {% for site in sites %}
              <option name='{{site.sitville}}' value='{{ site.id }}'>Site:{{ site.sitville }}</option>
            {% endfor %}
          </select>
        </form>
        <div>
          <a href="" class="btn btn-outline-success">Voir dashboard client</a>
        </div>
      </div>
      <hr>
      <div class="titreSite">
        <h4>Site:
          {{siteSelect.sitville}}</h4>
      </div>
      <hr>
      <div class="trancheUtilisateurs">
        <div class="titreUtilisateur">
          <h3>Utilisateurs</h3>
          <a href="" class="btn btn-outline-primary">Ajouter Utilisateur</a>
        </div>

        <div class="blocTableauUtilisateur">
          <table class="table">
            <thead>
              <tr>
                <th scope="col">Nom (logname)</th>
                <th scope="col">Action</th>
                <th scope="col"></th>
              </tr>
            </thead>
            <tbody>
              {% for utilisateur in utilisateurs %}
                <tr>
                  <td>{{utilisateur.logname}}</td>
                  <td>
                    <a href="" class="btn btn-outline-primary">Edit</a>
                  </td>
                  <td>
                    <a href="" class="btn btn-outline-danger">Supp.</a>
                  </td>
                </tr>
              {% endfor %}

            </tbody>
          </table>
        </div>
      </div>

      <div class="trancheEquipements">
        <div class="blocTitreEquipement">
          <h3>Equipements</h3>
          <a href="" class="btn btn-outline-primary">Ajouter equipement</a>
        </div>
        <div class="blocEquipement">
          <div class="tableauEquipements">
            <table class="table">
              <thead>
                <tr>
                  <th scope="col">Nom</th>
                  <th scope="col">Action</th>
                  <th scope="col"></th>
                  <th scope="col"></th>

                </tr>
              </thead>
              <tbody>
                {% for equipement in equipements %}
                  <tr>
                    <td>{{equipement.equmarque}}</td>
                    <td>
                      <form action="">
                        <button class="btn btn-outline-success" type="submit" formaction="" formmethod="post" value="{{equipement.id}}" name="postEquId">Afficher</button>
                      </form>
                      {# <a href="" class="btn btn-primary">Afficher</a> #}
                    </td>
                    <td>
                      <a href="" class="btn btn-outline-primary">Edit</a>
                    </td>
                    <td>
                      <a href="" class="btn btn-outline-danger">Supp.</a>
                    </td>
                  </tr>
                {% endfor %}

              </tbody>
            </table>
          </div>
          <h3>Detail equipement:
            {{DetailEquipement.equmarque}}
            {{DetailEquipement.equmodele}}
            {{DetailEquipement.equserie}}</h3>
          <div class="blocDetailEquipement">
            <div class="detailEquipHead">
              <table class="table">
                <thead>
                  <tr>
                    <th scope="col">Marque</th>
                    <th scope="col">Modele</th>
                    <th scope="col">N° serie</th>

                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>{{DetailEquipement.equmarque}}</td>
                    <td>{{DetailEquipement.equmodele}}</td>
                    <td>{{DetailEquipement.equserie}}</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="titreListePoints">
              <h3>Liste des points</h3>
              <a href="" class="btn btn-outline-primary">Ajouter un point</a>
            </div>
            <div class="tableauDesPoints">
              <table class="table">
                <thead>
                  <tr>
                    <th scope="col">Nom du pt.</th>
                    <th scope="col">Position</th>
                    <th scope="col">Capteur associé</th>
                    <th scope="col">Action</th>
                    <th scope="col"></th>

                  </tr>
                </thead>
                <tbody>
                  {% for UnPtMesAvecCapteur in lesPtMesAvecCapteur %}
                    <tr>
                      <td>{{UnPtMesAvecCapteur[0].ptmesnom}}</td>
                      <td>{{UnPtMesAvecCapteur[0].ptmesposition}}</td>
                      <td>{{UnPtMesAvecCapteur[1].capmarque}}_:_{{UnPtMesAvecCapteur[1].capserie}}</td>
                      <td>
                        <a href="" class="btn btn-outline-primary">Edit</a>
                      </td>
                      <td>
                        <a href="" class="btn btn-outline-danger">Supp.</a>
                      </td>
                    </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
            <div class="imageEquipement">
              <img src="{{ asset('images/'~DetailEquipement.equphoto1) }}" alt="photo equipement"/>
            </div>
          </div>
        </div>

        <form></form>
      </div>
    </div>

  </main>
{% endblock %}
